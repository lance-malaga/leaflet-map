import { MapContainer, TileLayer, Marker, Popup, Polyline, Circle, CircleMarker  } from "react-leaflet"
import 'leaflet/dist/leaflet.css'
import L from 'leaflet';
import { milleniumLine } from "@/data/milleniumLine";
import { expoLine } from "@/data/expoLine";

const icon = L.icon({ iconUrl: '/images/marker.png', iconSize: [50, 50] })
const pinIcon = L.icon({ iconUrl: '/images/pin.png', iconSize: [50, 50] })
const blueOptions = {color: '#2a455a'}
const fadeTealOptions = {color: '#04789e'}

const milleniumPolyline:[number, number][] = [
    [49.26588179086364, -123.07892800678081],
    [49.26334985936618, -123.06890988421806],
    [49.258543231921834, -123.05704376068985],
    [49.257875607750165, -123.05254281728259],
    [49.26054605025125, -123.03453904365357],
    [49.26228176039213, -123.02799221687935],
    [49.26241527402819, -123.01735362337128],
    [49.262815812769, -123.01510315166766],
    [49.26442483991831, -123.01441714246984],
    [49.26619326200745, -123.01119903270202],
    [49.2667458808309, -123.00696467326759],
    [49.26630378620198, -122.99764909236079],
    [49.26497747854791, -122.99256786641163],
    [49.264866951300824, -122.98240541451327],
    [49.264314311351704, -122.97867918215056],
    [49.26055619555233, -122.9681779818556],
    [49.2592297334081, -122.96479049788947],
    [49.25845594722426, -122.95378117206013],
    [49.25491848505173, -122.94192497498585],
    [49.25458683497724, -122.9258344261468],
    [49.25115965372621, -122.90330765777213],
    [49.247352224704336, -122.8949900973454],
    [49.24783022007905, -122.89261034117008],
    [49.25786705399506, -122.89315951567208],
    [49.25965913102538, -122.89224422483541],
    [49.263004167380544, -122.88913223599076],
    [49.27232128739791, -122.87650122244486],
    [49.27781517443722, -122.87229088459624],
    [49.27948710555871, -122.86881277941694],
    [49.27865114708282, -122.86020904555231],
    [49.27781517443722, -122.85673094037303],
    [49.27757632265844, -122.83311642931957],
    [49.277934600119536, -122.83183502214824],
    [49.27685975992842, -122.82561104445897],
    [49.27650147465948, -122.80803746039508],
    [49.27602375691905, -122.80401018071377],
    [49.27459057593629, -122.8001659591998],
    [49.27506830755745, -122.79833537752648],
    [49.28137967019215, -122.79317826066176],
    [49.2828098575982, -122.79301784032009],
    [49.285797400720746, -122.79152086221377],
];

const expoPolyline:[number, number][][] = [
    [
        [49.1828094066797, -122.84467969771],
        [49.183518535732645, -122.84650727939021],
        [49.184287432668484, -122.84706277467589],
        [49.18702119168302, -122.84706277467589],
        [49.18795979791982, -122.84759363051992],
        [49.188802881161415, -122.84791612003482],
        [49.19133204468976, -122.84791612003482],
        [49.19201700422826, -122.848157987171],
        [49.192701954283024, -122.84864172144337],
        [49.19380839203022, -122.849931679503],
        [49.19454600344653, -122.85065728091158],
        [49.20081525641538, -122.85065728091158],
        [49.20171079911376, -122.85073790329031],
        [49.20308042128478, -122.85186661659247],
        [49.206556984128106, -122.85734893834598],
        [49.20696075365269, -122.86314152144628],
        [49.20472871931207, -122.8701019524414],
        [49.203513355499794, -122.88604615645468],
        [49.20648825969654, -122.89986849336266],
        [49.2066623309373, -122.9023362302355],
    ],
    [
        [49.2066623309373, -122.9023362302355],
        [49.20961194386953, -122.89870822319276],
        [49.2105108619493, -122.89837535087655],
        [49.212343076133926, -122.8952200827635],
        [49.221274147871924, -122.89241539999635],
        [49.22297190852082, -122.89145708673092],
        [49.22990269745838, -122.88313550529712],
        [49.23284747267319, -122.8823155838082],
        [49.23739814365151, -122.88477534827491],
        [49.24047630099858, -122.8909247594417],
        [49.24315280361837, -122.89338452390844],
        [49.24542771679087, -122.89297456316399],
        [49.246498227901284, -122.89338452390844],
        [49.24703347475293, -122.89645922949184],
        [49.24976012255393, -122.90244341602018],
        [49.252897539902996, -122.91909456792384],
    ],
    [
        [49.2066623309373, -122.9023362302355],
        [49.200431661425164, -122.91463137404067],
        [49.20020564333463, -122.91702043630687],
        [49.201154412223524, -122.92515176607479],
        [49.20324163970983, -122.92747500315134],
        [49.20438009029886, -122.9341543097464],
        [49.201344163817105, -122.94112402097605],
        [49.19982613068265, -122.95157858782052],
        [49.200015887372665, -122.95593465733903],
        [49.20362112615173, -122.9588387036847],
        [49.20646718163961, -122.95738668051187],
        [49.208364460959615, -122.95593465733903],
        [49.21500436525745, -122.96174275003038],
        [49.21481466608239, -122.97045488906745],
        [49.218039453219575, -122.97887663227533],
        [49.22145370421886, -122.99455848254205],
        [49.251602678134724, -123.0630939803263],
        [49.25577278500208, -123.06919247765222],
        [49.263732919882145, -123.06948288228679],
        [49.26676501450399, -123.07877583059299],
        [49.26922845419139, -123.08080866303499],
        [49.27358654617482, -123.1017177967239],
        [49.276665839277705, -123.10253020025364],
        [49.27767330320057, -123.10407444175893],
        [49.27805109686621, -123.10716292476953],
        [49.280443722879866, -123.11102352853277],
        [49.28601151699684, -123.12009922494582],
        [49.28726704641775, -123.1205804364688],
        [49.28745537307337, -123.12038795185958],
        [49.288145897989516, -123.11932928650901],
        [49.287957573971525, -123.1174044404171],
        [49.28764369900964, -123.11615329045735],
        [49.28582318482619, -123.11085996370451],
    ]
];


export default function Map() {
    return (
        <MapContainer
            style={{height: '100vh'}}
            center={[49.254756653784106, -122.9389780238981]}
            zoom={12}
            scrollWheelZoom={true}
        >
            <TileLayer
                attribution='&copy; <a href="https://github.com/lance-malaga/leaflet-map">By Lance Malaga</a> contributors'
                url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
            />
            { milleniumLine.map((station, index) => {
                return (
                    <Marker key={index} position={station.position} icon={icon}>
                        <Popup>{station.name}</Popup>
                    </Marker>
                )
            })}
            { expoLine.map((station, index) => {
                return (
                    <Marker key={index} position={station.position} icon={pinIcon}>
                        <Popup>{station.name}</Popup>
                    </Marker>
                )
            })}
            <Polyline pathOptions={blueOptions} positions={milleniumPolyline}/>
            <Polyline pathOptions={fadeTealOptions} positions={expoPolyline}/>
        </MapContainer>
    )
}